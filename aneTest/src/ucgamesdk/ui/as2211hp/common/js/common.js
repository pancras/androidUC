var sdk={common:{base:{},hooks:{},events:{},ui:{},utils:{}},system:{collections:{},controllers:{},models:{},routes:{},views:{}}},S=sdk;S.SCHK=S.common.hooks;S.SCEV=S.common.events;S.SCUI=S.common.ui;S.SCUT=S.common.utils;S.SSRO=S.system.routes;S.SSCL=S.system.collections;S.SSCT=S.system.controllers;S.SSMO=S.system.models;S.SSVW=S.system.views;(function(a){a.initRoutes=function(c){a.SCEV.Proxy.trigger(a.SCEV.EventType.SDK_INIT_ROUTE,c)};a.initSdkBase=function(){a.sdkBase=new sdkBase};a.initView=function(c){a.SCEV.Proxy.trigger(a.SCEV.EventType.SDK_INIT_VIEW,c)};a.initSync=function(){a.SCEV.Proxy.trigger(a.SCEV.EventType.SDK_INIT_SYNC)};a.initTouch=function(){a.SCEV.Proxy.trigger(a.SCEV.EventType.SDK_INIT_TOUCH)};a.initHooks=function(){_.isUndefined(sdk.common.hooks.request)||a.sdkBase.hooks.extend("request",sdk.common.hooks.request)};a.initHeader=
function(){sdk.SdkHeader.init()};a.initHandler=function(){a.SSCT.GetHandler=function(c,d){if(!a.SSCT.handler)a.SSCT.handler={};var b=c+"Ins",e="";a.SSCT.handler[b]||(a.SSCT.handler[b]={});switch(c){case "Collection":e="SSCL";break;case "Model":e="SSMO";break;case "Controller":e="SSCT"}a.SSCT.handler[b][d]||(a.SSCT.handler[b][d]=new a[e][d]);return a.SSCT.handler[b][d]}};a.initializer=function(c){a.initSdkBase();a.initHooks();a.initSync();a.initTouch();a.initHeader();a.initHandler();a.initView(c);
a.initRoutes(c)}})(sdk);S.SCEV.EventType=S.SCEV.EventType||{};_.extend(S.SCEV.EventType,{SDK_INIT_FINISH:"sdkInitFinish",SDK_INIT_SYNC:"sdkInitSync",SDK_INIT_TOUCH:"sdkInitTouch",PRE_ROUTE:"preRoute",SDK_INIT_VIEW:"sdkInitView",SDK_INIT_ROUTE:"sdkInitRoute",SDK_WINDOW_EVENT:"listenEvent",SDK_REMOVE_WIN_EVENT:"removeEvent"});S.SCEV.Handler=S.SCEV.Handler||{};
(function(a){a.handlers={};a.viewInstance=a.viewInstance||{};a.sdkInitSync=function(a,d){var b=[],e=0;Backbone.jsonpSync=function(a,c,d){var h="jsonpSync"+e++,k;b.push(h);window[h]=function(a){"2000000"==a.state.code&&d.success?d.success.apply(this,[a,c]):d.error&&d.error.apply(this,[a.state,c]);delete window[h];clearTimeout(k);b=_.without(b,h)};a={url:c.url+"&callback="+h,data:d.data};k=setTimeout(function(){-1!=b.indexOf(h)&&(d.error&&d.error.apply(this,[{code:408,msg:"\u670d\u52a1\u5668\u63a5\u53e3 "+
c.url+" \u8bf7\u6c42\u8d85\u65f6"},c]),window[h]=function(){delete window[h]},b=_.without(b,h))},rConfig.bbs.serverTimeout);return $.ajaxJSONP(a)};Backbone.sync=function(a,c,b){var e,k,m;if(_.isUndefined(c.url))throw Error('A "url" property or function must be specified');var p=!1;_.each(rConfig.straightApis,function(a){0<=c.url.indexOf(a)&&(p=!0)});if(p)return Backbone.jsonpSync.apply(this,arguments);e=c.url.split("/");k=b.error||function(){};d=!_.isUndefined(b.data)&&!_.isEmpty(b.data)?b.data:{};
if(_.isUndefined(b.success))throw Error('A "success" property or function must be specified');m=b.success;if(_.isEmpty(e[0])||_.isEmpty(e[1]))return k(c,{success:!1,msg:"\u8bf7\u6c42\u5730\u5740\u9519\u8bef"}),!1;if(_.isEmpty(d)&&c&&("create"==a||"update"==a))d=c.toJSON();if(e[0]==S.sdkBase.servType.SDKSERVER&&e[1]==S.sdkBase.actions.CALL_SDK_SERVER){if(_.isUndefined(e[2])||_.isEmpty(e[2]))return k(c,{success:!1,msg:"\u8bf7\u6c42\u5730\u5740\u9519\u8bef"}),!1;d.api=e[2]}S.sdkBase.request(e[0],e[1],
d,m,k,!0,30,b)}};a.sdkInitTouch=function(){_.extend(Backbone.View.prototype,Backbone.Events,{delegateEvents:function(a){sdk.VirtualEvent.delegateEvents(a,this)},undelegateEvents:function(){sdk.VirtualEvent.undelegateEvents(this)}})};a.preRoute=function(a,d){document.removeEventListener("hidekeyboard");!_.isUndefined(d)&&!_.isEmpty(d)&&(_.isUndefined(d.enterPage)||sdk.Log.pageEnter(d.enterPage,d.enterBusiness));console.log("add hide key board event");document.addEventListener("hidekeyboard",function(){console.log("key board event fire");
document.body.scrollTop=0})};a.listenEvent=function(c,d){var b=d&&d.eventName?d.eventName:null;if(!b)throw Error("Wrong EventType \uff1a["+b+"]");var e=d&&d.handler?d.handler:function(){};a.handlers[b]=a.handlers[b]||[];a.handlers[b].push(e);document.addEventListener(b,e)};a.removeEvent=function(c,d){var b=d&&d.eventName?d.eventName:null;if(!b)throw Error("Wrong EventType \uff1a["+b+"]");a.handlers[b]&&(_.each(a.handlers[b],function(a){document.removeEventListener(b,a)}),a.handlers[b]=[])};a.sdkInitView=
function(c,d){var b=S.SSVW,e=a.viewInstance;switch(d){case "user":e.user=new b.User;e.sso=new b.Sso;e.register=new b.Register;e.vip=new b.Vip;e.secrecy=new b.Secrecy;e.findPassword=new b.FindPassword;break;case "pay":e.pay=new b.Pay;break;case "game":e.game=new b.Game;break;case "bbs":e.bbs=new b.BBS;e.post=new b.Post;e.topic=new b.Topic;e.reply=new b.Reply;break;case "general":e.general=new b.General}};a.sdkInitRoute=function(c,d){switch(d){case "user":Route.routeInit("User");break;case "pay":Route.routeInit("Pay");
break;case "game":Route.routeInit("Game");break;case "bbs":Route.routeInit("Bbs")}var b=a.viewInstance;window.Route&&Route.register("sdk",function(a,c){var i=d,g=c.shift(),h=c.shift();"user"==d&&(i="sso","user"===g&&"register"===h&&(g="register",h="rapidReg"));g=g?g:i;i=rConfig.defaultActions[g];h=h?h:i;console.log("[request from : "+a+"]   ---\>  [model : "+g+"]  [action:"+h+"]   [params:"+c.toString()+"]");b[g]&&b[g][h]&&b[g][h].apply(this,c)})}})(S.SCEV.Handler);sdk.common.events.Handler=sdk.common.events.Handler||{};(function(a){a.sdkInitFinish=function(){}})(sdk.common.events.Handler);S.SCEV.Proxy=S.SCEV.Proxy||{};(function(a){_.extend(a,Backbone.Events);a.bind("all",function(a){var d=S.SCEV.Handler;_.isEmpty(a)||d[a]&&_.isFunction(d[a])&&d[a].apply(this,arguments);return this})})(S.SCEV.Proxy);sdk.common.hooks.request=sdk.common.hooks.request||{loadingEl:{},isLoading:!1,initialize:function(){_.bindAll(this)},start:function(a){if(!this.isLoading&&a.isAsyn&&(_.isUndefined(a.option)||_.isUndefined(a.option.quiet)||!1===a.option.quiet))this.isLoading=!0,this.loadingEl[a.id]=S.common.ui.NoticeBox.loading()},success:function(a){!_.isEmpty(this.loadingEl[a.id])&&0<this.loadingEl[a.id].el.length&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[a.id],null,"remove");this.loadingEl[a.id]=
{};this.isLoading=!1},this),1)},fail:function(a){!_.isEmpty(this.loadingEl[a.id])&&0<this.loadingEl[a.id].el.length&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[a.id],null,"remove");this.loadingEl[a.id]={};this.isLoading=!1},this),1)},timeout:function(a){!_.isEmpty(this.loadingEl[a.id])&&0<this.loadingEl[a.id].el.length&&setTimeout($.proxy(function(){S.common.ui.NoticeBox.hide(this.loadingEl[a.id],null,"remove");this.loadingEl[a.id]={};this.isLoading=!1},this),1)}};sdk.common.ui.Mask=sdk.common.ui.Mask||{};
(function(a){var c=!1,d=null,b={bgColor:"#000",opacity:"0",zIndex:190,showType:"fade"};a.showTime=0;a.isFading=!1;a.setup=function(a){_.extend(b,a)};a.show=function(e,f,i){a.showTime+=1;var g=b.opacity,h=e&&e.showType?e.showType:b.showType,k,m,p="fadeIn",r=200,q=function(){$(window).on("resize",function(){k=ucf.utils.Body.getPageSize();d.css({width:k[2],height:k[3]})});$(window).on("scroll",function(){m=ucf.utils.Body.getPageScroll();console.log("page scroll : "+m[1]);d.css({top:m[1],left:m[0]})});
$(window).on("touchmove",function(a){a.preventDefault()})},f=f?function(){q();f()}:q;switch(h){case "show":p="show",r=0}if(e&&_.isNumber(e.opacity))g=e.opacity,delete e.opacity;if(c)if(a.isFading)d.remove(),d=null,a.showTime=0,c=a.isFading=!1;else{k=ucf.utils.Body.getPageSize();m=ucf.utils.Body.getPageScroll();e={width:k[2],height:k[3],top:0<m[1]?m[1]:"0",left:0<m[0]?m[0]:"0"};if(_.isString(g)||0<g)e.opacity=g;d.css(e);d[p]("fast");f&&_.delay(f,r);return}_.extend(b,e);_.isEmpty(d)&&(_.isUndefined(i)?
$("body").append('<div id="bodyMask"></div>'):$(i).append('<div id="bodyMask"></div>'),d=$("#bodyMask"),d.css({backgroundColor:b.bgColor,top:"0",left:"0",position:"absolute",zIndex:b.zIndex,opacity:g,"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}));k=ucf.utils.Body.getPageSize();m=ucf.utils.Body.getPageScroll();d.css({width:k[2],height:k[3],top:0<m[1]?m[1]:"0",left:0<m[0]?m[0]:"0",opacity:g});c=!0;d[p]("fast");f&&_.delay(f,r);return d};a.setOpacity=function(a){_.isEmpty(d)||d.css("opacity",a)};
a.remove=function(c){if(!_.isEmpty(d)&&(a.showTime-=1,0>=a.showTime)){a.showTime=0;var b="fadeOut",i=200;switch(c){case "remove":b="hide",i=0}a.isFading=!0;d[b]("fast");_.delay(function(){a.isFading=!1;$(window).off("resize");$(window).off("scroll");$(window).off("touchmove")},i)}}})(sdk.common.ui.Mask);sdk.common.ui.MsgBox=sdk.common.ui.MsgBox||{};
(function(a){var c="Msg",d=!1,b={height:"auto",width:"86%",zIndex:200};a.setup=function(a){_.extend(b,a)};a.alert=function(c,d){a.show(c,d)};a.confirm=function(c,d){a.show(c,d,"confirm")};a.show=function(e,f,i,g){if(!_.isEmpty(e)){g=_.isBoolean(g)?g:!0;i=null!=i?i:"default";f=_.isEmpty(f)?{}:f;switch(i){case "confirm":c="Confirm";break;default:c="Msg"}g&&sdk.common.ui.Mask.show({opacity:0.3});$box=$("#ui"+c+"Box");0>=$box.length&&($("body").append($("#"+c+"Box-tpl").html()),$box=$("#ui"+c+"Box"),
$box.css("zIndex",b.zIndex));$("#ui"+c+"BoxContent").html(e);$box.height(b.height);$box.width(b.width);$box.fadeIn("fast");$box.UcEffects().moveTo("center","center");$boxConfirm=$("#ui"+c+"BoxConfirm");$boxCancel=$("#ui"+c+"BoxCancel");$boxConfirm.removeClass("btnClick-none");$boxCancel.removeClass("btnClick-none");(function(){f.confirmName?$boxConfirm.val(f.confirmName):$boxConfirm.val("\u786e\u5b9a");1<=$boxConfirm.length&&($boxConfirm.off("click"),$boxConfirm.on("click",function(){$boxConfirm.addClass("btnClick-none");
a.remove();_.isEmpty(f)||!_.isUndefined(f.callBack)&&_.isFunction(f.callBack)&&f.callBack()}));1<=$boxCancel.length&&(f.cancelName?$boxCancel.val(f.cancelName):$boxCancel.val("\u53d6\u6d88"),$boxCancel.off("click"),$boxCancel.on("click",function(){$boxCancel.addClass("btnClick-none");a.remove();_.isEmpty(f)||!_.isUndefined(f.cancel)&&_.isFunction(f.cancel)&&f.cancel()}))})();$(":focus").blur();$(window).on("resize",a.onResize);$(window).on("scroll",a.onScroll);S.sdkBase.request(S.sdkBase.servType.APP,
S.sdkBase.actions.OVERRIDE_BACK_BTN,{override:!0});document.addEventListener("backbutton",a.remove);d=!0}};a.remove=function(){$("#ui"+c+"Box").fadeOut();sdk.common.ui.Mask.remove();d=!1;$(window).off("resize");$(window).off("scroll");S.sdkBase.request(S.sdkBase.servType.APP,S.sdkBase.actions.OVERRIDE_BACK_BTN,{override:!1});document.removeEventListener("backbutton",a.remove)};a.onResize=function(){d&&($("#ui"+c+"Box").height(b.height),$("#ui"+c+"Box").css("width",""),$("#ui"+c+"Box").width(b.width),
$("#ui"+c+"Box").UcEffects().moveTo("center"))};a.onScroll=function(){d&&$("#ui"+c+"Box").UcEffects().moveTo("center")}})(sdk.common.ui.MsgBox);sdk.common.ui.NoticeBox=sdk.common.ui.NoticeBox||{};
(function(a){var c=[],d=!1,b=0,e={},f=function(c,b,e,f,g,j,i){var n=c.el;!1!==e&&(d=!0);var e="fadeIn",s="fade";switch(g){case "slide":e="slideDown";break;case "show":s=e="show"}i=i||{};j&&S.common.ui.Mask.show({opacity:i.maskOpacity,showType:s});if(b=_.isNull(b)||_.isUndefined(b)?!0:b)n[e]("fast"),_.isNumber(b)?_.delay(function(){a.hide(c,f)},1E3*b):_.delay(function(){a.hide(c,f)},1E3*h.hideTime);else n[e]("fast",f)},i='<div id="<%=noticeId%>" class="<%=addCls%>"><p class="item ms-tc"><span<% if(noticeCls) { %> class="<%=noticeCls%>"<% } %>><%=msg%></span></p></div>',g=
function(a,c){this.height=a||16;this.rgbColorArray=null!=c&&3==c.length?c:[32,56,14];this.canvasElem=document.createElement("canvas");this.rotation=0;this.intervalId=null;this.isRunning=!1};g.prototype.draw=function(){if(0>this.rotation)this.rotation=-this.rotation;this.rotation%=12;var a=this.height,c=this.canvasElem;c.setAttribute("width",this.height);c.setAttribute("height",this.height);var b=c.getContext("2d"),d=2*-Math.PI/12;b.save();b.clearRect(0,0,a,a);b.translate(a/2,a/2);for(var e=a/10,a=
a/5,f=0;12>f;f++)b.save(),b.rotate(f*d),b.fillStyle="rgba("+this.rgbColorArray[0]+","+this.rgbColorArray[1]+","+this.rgbColorArray[2]+","+(12-(f+this.rotation)%12)/12+")",b.fillRect(-e/2,a,e,a),b.restore();b.restore();this.rotation++;this.rotation%=12;return c};g.prototype.rotate=function(){var a=this;this.intervalId=window.setInterval(function(){a.draw()},50)};g.prototype.stop=function(){window.clearInterval(this.intervalId)};var h={zIndex:199,hideTime:3,okCls:"noticeOk",errorCls:"noticeError",loadingWidth:40};
a.setup=function(a){_.extend(h,a)};a.ok=function(c,b){return a.show(c,"ok","ui-sucont",!0,null,{position:"center",callback:b})};a.error=function(c,b){return a.show(c,"error","ui-sucont",!0,null,{position:"center",callback:b})};a.popError=function(c,b,d){i='<span class="ms-fl red" id="<%=noticeId%>"><%=msg%></span>';return a.show(c,"error","",!1,b,{showMask:!1,showType:"slide",callback:d})};a.loading=function(c,b){a.loadingBox=new g(h.loadingWidth,[119,119,119]);a.loadingBox.draw();a.loadingBox.rotate();
var d=a.loadingBox.canvasElem,e=a.show(c,"loading","",!1,null,{position:"center",callback:b,width:h.loadingWidth,height:h.loadingWidth,showType:"show"});e.el.html(d);return e};a.show=function(a,g,p,r,q,j){var o={};o.msg=a;var n="";o.addCls=p;j=j||{};b++;var s=b;o.noticeId="noticeContainer"+s;switch(g){case "ok":o.noticeCls=h.okCls;j.maskOpacity=0.3;break;case "error":o.noticeCls=h.errorCls;j.maskOpacity=0.3;break;case "loading":n='<div id="<%=noticeId%>"></div>',j.maskOpacity="0"}_.isEmpty(n)&&(n=
i);var n=template.compile("",n)(o),l="";if(_.isEmpty(q)){if(sdk.EC.hideInput(),$("body").append(n),l=$("#"+o.noticeId),j.width&&l.width(j.width),j.height&&l.height(j.height),l.css("zIndex",h.zIndex),(""==l.css("position")||"static"==l.css("position"))&&l.css("position","absolute"),j.position){var u=function(){var a=j.width?j.width:parseInt(l.width()),c=j.height?j.height:parseInt(l.height());_.each({paddingLeft:{type:"width",count:1},paddingRight:{type:"width",count:1},paddingTop:{type:"height",count:1},
paddingBottom:{type:"height",count:1},border:{count:2}},function(b,d){b.value=l.css(d)?parseInt(l.css(d)):0;b.value=!isNaN(b.value)?b.value:0;"width"==b.type?a+=b.value*b.count:("height"!=b.type&&(a+=b.value*b.count),c+=b.value*b.count)});var b=ucf.utils.Body.getPosition(a,c,j.position),d=ucf.utils.Body.getPageScroll();(""==l.css("top")||"auto"==l.css("top"))&&l.css("top",b[3]+d[1]);(""==l.css("left")||"auto"==l.css("left"))&&l.css("left",b[2]+d[0])};u();$(window).on("resize",function(){l.css("top",
"");l.css("left","");u()});$(window).on("scroll",function(){l.css("top","");l.css("left","");u()})}}else q.prepend(n),l=$("#"+o.noticeId),j.width&&l.width(j.width),j.height&&l.height(j.height);l.hide();var n=_.isEmpty(q),t=j.callback?j.callback:null,v=!_.isUndefined(j.showMask)?j.showMask:!0,w=!_.isUndefined(j.showType)?j.showType:"fade",o={id:s,el:l};e[s]={showMask:!0};if(d&&n){n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);c.push({id:s,el:l,args:n});return o}f(o,r,n,t,w,v,j);return o};
a.hide=function(b,g,h){var i=b.el,q=b.id;if(i&&1<=i.length){var b="fadeOut",j="fade",o=200;switch(h){case "slide":b="slideUp";break;case "remove":j=b="remove",o=1}i[b]("fast");_.delay(function(){$(window).off("resize");$(window).off("scroll");e[q]&&e[q].showMask&&S.common.ui.Mask.remove(j);_.isEmpty(a.loadingBox)||a.loadingBox.stop();sdk.EC.showInput();d=!1;var b=c.shift();g&&g.apply();if(b){var h=!_.isEmpty(b.args[5])&&b.args[5].callback?b.args[5].callback:null,i=!_.isEmpty(b.args[5])&&!_.isUndefined(b.args[5].showMask)?
b.args[5].showMask:!0,k=!_.isEmpty(b.args[5])&&!_.isUndefined(b.args[5].showType)?b.args[5].showType:"fade";f({id:b.id,el:b.el},b.args[3],_.isEmpty(b.args[4]),h,k,i,b.args[5])}},o)}}})(sdk.common.ui.NoticeBox);sdk.SdkHeader=sdk.common.ui.SdkHeader=sdk.common.ui.SdkHeader||{};
(function(a){a.oriHeaderVer="2.0.1";a.useNewHeaderVer=10;a.showHeader=!0;a.init=function(){var c;var d=S.sdkBase.sdkVersion();c=a.oriHeaderVer;!d||!c?c=!1:(d=d.split("."),c=c.split("."),3>d.length||3>c?c=!1:(d=100*parseInt(d[0])+10*parseInt(d[1])+parseInt(d[2]),c=100*parseInt(c[0])+10*parseInt(c[1])+parseInt(c[2]),c=d>c?1:d==c?0:-1));if(!1!==c){if(0>=c)a.showHeader=!1}else a.showHeader=!1};a.show=function(c){a.showHeader&&S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.SET_UI_STYLE,
{topBar:{text:c}})};a.hide=function(){}})(sdk.common.ui.SdkHeader);sdk.common.ui.Tab=sdk.common.ui.Tab||{};
(function(a){a.switching=function(a,d,b,e){var f=$(a+">"+d);f.on(b,function(){for(var b=0;b<f.length;b++)f[b]==this?(f.eq(b).addClass(e).removeClass("off"),$(a+"_"+b).show()):(f.eq(b).removeClass(e),$(a+"_"+b).hide())})};a.switchTo=function(a,d,b,e){for(var e=e||"current",b=$(a+">"+(b||"li")),f=0;f<b.length;f++)f==d?(b.eq(f).addClass(e).removeClass("off"),$(a+"_"+f).show()):(b.eq(f).removeClass(e),$(a+"_"+f).hide())};a.click=function(a,d,b,e){b=$(d+">"+b);if(0<b.length){b.removeClass(e);for(var f=
0;f<b.length;f++)b[f].id==a[0].id?$(d+"_"+f).show():$(d+"_"+f).hide()}a.addClass(e)}})(sdk.common.ui.Tab);sdk.common.ui.Umbrella=sdk.common.ui.Umbrella||{};
(function(a){a.icon_umbrella=$("#icon_umbrella");a.umbrella_box=$("#umbrella_box");a.animate=null;a.state={post:"show",reply:"show"};a.type="post";a.operation={post:"#makeNewReply",reply:"#makeNewPost"};a.init=function(c){c=c||"post";a.type=c;a.icon_umbrella=$("#icon_umbrella");a.umbrella_box=$("#umbrella_box");"show"!=a.state[c]&&(a.icon_umbrella.removeClass("icon_parasol"),a.icon_umbrella.addClass("icon_umbrella"),a.umbrella_box.width("0px"),a.umbrella_box.hide());a.icon_umbrella.on("click",a.toggle);
$(a.operation[c]).remove()};a.toggle=function(){a.icon_umbrella=$("#icon_umbrella");a.umbrella_box=$("#umbrella_box");a.icon_umbrella.hasClass("icon_umbrella")?a.slideshow():a.slidehide()};a.slideshow=function(){a.state[a.type]="show";clearInterval(a.animate);a.icon_umbrella.addClass("icon_parasol");a.icon_umbrella.removeClass("icon_umbrella");a.umbrella_box.show();a.animate=setInterval(function(){var c=parseInt(a.umbrella_box.width());200>c?0==c?a.umbrella_box.width(30):a.umbrella_box.width(c+30):
(a.umbrella_box.width(220),clearInterval(a.animate))},30)};a.slidehide=function(){a.state[a.type]="hide";clearInterval(a.animate);a.icon_umbrella.removeClass("icon_parasol");a.icon_umbrella.addClass("icon_umbrella");a.animate=setInterval(function(){a.umbrella_box.show();var c=parseInt(a.umbrella_box.width());30<c?a.umbrella_box.width(c-30):(a.umbrella_box.width("0px"),a.umbrella_box.hide(),a.icon_umbrella.show(),clearInterval(a.animate))},30)}})(sdk.common.ui.Umbrella);sdk.EC=sdk.common.utils.ElementControl=sdk.common.utils.ElementControl||{};(function(a){a.showInput=function(){$("[type=text],[type=password],textarea").css("visibility","visible")};a.hideInput=function(){$("[type=text],[type=password],textarea").css("visibility","hidden")}})(sdk.EC);sdk.Log=sdk.common.utils.Log=sdk.common.utils.Log||{};
(function(a){a.businesses={PAGE_USER:"page.user",PAGE_GAME:"page.game",PAGE_PAY:"page.pay",PAGE_GENERAL:"page.general",PAGE_BBS:"page.bbs"};a.steps={ENTER:"enter",CLOSE:"close"};a.currBusiness="";a.pageEnter=function(c,d){if(_.isUndefined(c)||0>_.indexOf(_.values(a.businesses),c))throw"log.js : business is not correct!";var b="";!_.isUndefined(d)&&!_.isEmpty(d)&&_.each(d,function(a){b+="."+a});a.debug("page Enter:"+c+"|"+c+b);a.currBusiness=c+b;var e=c+b;setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,
S.sdkBase.actions.STAT,{business:e,step:a.steps.ENTER},null,null,null,null,{quiet:!0})},0)};a.pageClose=function(){if(!_.isEmpty(a.currBusiness)){var c=a.currBusiness;a.debug("page Close:"+c);setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:c,step:a.steps.CLOSE},null,null,null,null,{quiet:!0})},0)}};a.click=function(c,d){if(_.isUndefined(c)||0>_.indexOf(_.values(a.businesses),c))throw"log.js : business is not correct!";var b="";!_.isUndefined(d)&&
!_.isEmpty(d)&&_.each(d,function(a){b+="."+a});a.debug("page Enter:"+c+"|"+c+b);var e=c+b;setTimeout(function(){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:e,step:a.steps.ENTER},null,null,null,null,{quiet:!0});S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.STAT,{business:e,step:a.steps.CLOSE},null,null,null,null,{quiet:!0})},0)};a.debug=function(a){console.log(a)};a.info=function(){};a.warn=function(){};a.error=function(){}})(sdk.Log);sdk.PageCache=sdk.common.utils.PageCache=sdk.common.utils.PageCache||{};(function(a){a.get=function(a){return S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.GET_PAGE_PARAMS,{key:a})};a.set=function(a,d){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.SET_PAGE_PARAMS,{key:a,value:d})};a.del=function(a){S.sdkBase.request(S.sdkBase.servType.COMMON,S.sdkBase.actions.SET_PAGE_PARAMS,{key:a})}})(sdk.PageCache);sdk.Url=sdk.common.utils.Url=sdk.common.utils.Url||{};(function(a){a.staticImg=function(){};a.redirect=function(a){console.log("url redirect:"+a);S.Log.pageClose();window.location.href=a};a.back=function(){S.Log.pageClose();S.sdkBase.request(S.sdkBase.servType.APP,S.sdkBase.actions.HISTORY_BACK)};a.reload=function(){window.location.reload()};a.location={};a.location.route=function(a){window.location.hash=a;S.Log.pageClose();S.sdkBase.request(S.sdkBase.servType.APP,S.sdkBase.actions.URL_HASH_CHANGE)}})(sdk.Url);sdk.VirtualEvent=sdk.common.utils.VirtualEvent=sdk.common.utils.VirtualEvent||{};
(function(a){var c=ucf.effect.Touch;a.click=function(a,b,e,f,i){var e=!_.isUndefined(e)?e:{},f=!_.isUndefined(f)&&!_.isEmpty(f)?f:"",g=!1,h=!1,k=0,m=0,p;if(c.isTouchDevice())var r="touchstart"+f,q="touchmove"+f,j="touchend"+f;else r="mousedown"+f,q="mousemove"+f,j="mouseup"+f;var f=function(a){h=g=!0;p=this;var b=!1;_.each(rConfig.hasFeedBack,function(a){if("true"!==$(p).attr("data-disabled")&&($(p).hasClass(a)||"feed"==$(p).attr("data-btnFeed")))b=!0});_.each(rConfig.blockFeedBack,function(a){$(p).hasClass(a)&&
(b=!1)});b&&$(p).addClass(rConfig.feedBackCls);a=c.isTouchDevice()?a.touches[0]:a;k=a.clientX;m=a.clientY},o=function(a){if(h&&($(document).height()<=$(window).height()&&a.preventDefault(),a=c.isTouchDevice()?a.touches[0]:a,5<Math.abs(a.clientX-k)||5<Math.abs(a.clientY-m)))g=!1},n=function(a){h&&"true"!==$(this).attr("data-disabled")&&($(this).hasClass(rConfig.feedBackCls)&&$(this).removeClass(rConfig.feedBackCls),$(document).height()<=$(window).height()&&a.preventDefault(),g&&b(a,this,e),h=g=!1)};
!_.isUndefined(i)&&!_.isEmpty(i)?($(a).on.apply($(a),[r,i,f]),$(a).on.apply($(a),[q,i,o]),$(a).on.apply($(a),[j,i,n])):($(a).on.apply($(a),[r,f]),$(a).on.apply($(a),[q,o]),$(a).on.apply($(a),[j,n]));$(document).on.apply($(document),[j,function(){g||$("."+rConfig.feedBackCls).removeClass(rConfig.feedBackCls)}])};a.offClick=function(a){if(c.isTouchDevice())var b="touchstart",e="touchmove",f="touchend";else b="mousedown",e="mousemove",f="mouseup";$(a).off(b);$(a).off(e);$(a).off(f)};a.delegateEvents=
function(c,b,e){var f=/^(\S+)\s*(.*)$/;if(c||(c=!b||!b.events?null:_.isFunction(b.events)?b.events():b.events)){b.undelegateEvents();for(var i in c){var g=c[i];!_.isUndefined(e)&&_.isFunction(e)&&(g=function(a){return function(){e(a)}}(g));_.isFunction(g)||(g=b[c[i]]);if(!g)throw Error('Method "'+c[i]+'" does not exist');var h=i.match(f),k=h[1],h=h[2],g=_.bind(g,b);switch(k){case "click":case "touch":""===h?a.click(b.$el,g,null,".delegateEvents"+b.cid):a.click(b.$el,g,null,".delegateEvents"+b.cid,
h);break;case "start":case "move":case "up":if(""===h)ucf.effect.Touch.on(k,b.$el,g,!0,null,".delegateEvents"+b.cid);else ucf.effect.Touch.on(k,b.$el,g,!0,null,".delegateEvents"+b.cid,h);break;case "onclick":k="click";k+=".delegateEvents"+b.cid;if(""===h)b.$el.on(k,g);else b.$el.on(k,h,g);break;default:if(k+=".delegateEvents"+b.cid,""===h)b.$el.on(k,g);else b.$el.on(k,h,g)}}}};a.undelegateEvents=function(a){a.$el.off(".delegateEvents"+a.cid)}})(sdk.VirtualEvent);var rConfig={user:{usernameFilter:/([^a-z0-9A-Z\u0080-\uFFFF]+)/,passwordFilter:/([^0-9A-Za-z]+)/,accountFilter:/^[0-9]*$/,emailAccountFilter:/^([\w]+([\w-\.+]*[\w-]+)?)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,mobileFilter:/^[0-9]*$/,showUserNickLen:7,defaultGameName:"\u6e38\u620f\u8d26\u53f7"},pay:{historyPerpage:10,historySplitMax:30},bbs:{serverTimeout:3E4,listPerIndexPage:30,listPerPage:20,subPageCount:3,listSubPage:10,topicReplyCount:10,ContentLengthLimit:200,
group:{exp:1,test:2,ask:3,mood:4,advise:5},cacheTime:{index:300,board:3600,topic:600,reply:600,search:600},faces:{1:"01_wx.png",2:"02_pz.png",3:"03_hs.png",4:"04_fd.png",5:"05_bk.png",6:"06_ll.png",7:"07_hx.png",8:"08_bz.png",9:"09_fk.png",10:"10_dk.png",11:"11_gg.png",12:"12_fh.png",13:"13_tp.png",14:"14_cy.png",15:"15_jy.png",16:"16_qq.png",17:"17_tx.png",18:"18_zj.png",19:"19_zk.png",20:"20_kl.png",21:"21_ka.png",22:"22_ot.png",23:"23_zm.png",24:"24_hx.png",25:"25_bs.png",26:"26_dm.png",27:"27_yw.png",
28:"28_yd.png",29:"29_lh.png",30:"30_gz.png"},faceDir:"../common/images/faces/"},feedBackCls:"ui-feed",hasFeedBack:"ui-lbtn,ui-lblur,ui-pwdbtn,ui-fbtn,li-r-btn,li-l-btn,ui-valid,QsBoxFeed,splitPage,ui-rebtn,postTitle,replyNum,seach_a,ui-dkli,lo_btn,input_login,Qsel,Qseld,input_reg".split(","),blockFeedBack:["ui-disable"],template:{},enumTypes:{gender:{"0":"\u5973",1:"\u7537"}},payWaysMap:{101:"U\u70b9\u652f\u4ed8",1:"\u79fb\u52a8\u5145\u503c\u5361",2:"\u8054\u901a\u5145\u503c\u5361",3:"\u7535\u4fe1\u5145\u503c\u5361",
4:"\u9a8f\u7f51\u4e00\u5361\u901a",5:"\u76db\u5927\u5145\u503c\u5361",6:"\u5f81\u9014\u5145\u503c\u5361",1007:"Q\u5e01\u5145\u503c\u5361",1008:"\u4e45\u6e38\u5145\u503c\u5361",1009:"\u6613\u5b9de\u5361\u901a",1010:"\u7f51\u6613\u5145\u503c\u5361",7:"\u5b8c\u7f8e\u5145\u503c\u5361",1012:"\u641c\u72d0\u5145\u503c\u5361",1013:"\u7eb5\u6e38\u4e00\u5361\u901a",1014:"\u5929\u4e0b\u4e00\u5361\u901a",1015:"\u5929\u5b8f\u4e00\u5361\u901a",201:"\u652f\u4ed8\u5b9d",202:"\u652f\u4ed8\u5b9d",501:"\u5de5\u5546\u94f6\u884c",
502:"\u5efa\u8bbe\u94f6\u884c",503:"\u62db\u5546\u94f6\u884c",1021:"\u79fb\u52a8\u8bdd\u8d39\u652f\u4ed8",1022:"U\u70b9\u652f\u4ed8"},apis:{PAY:"pay.page.wap.create",ALIPAY:"pay.page.wap.create",GET_PAY_WAY:"pay.charge.config.payway",CARD_PAY:"pay.charge.card.pay",UDPAY:"pay.charge.up.pay",PAY_WAY_USAGE:"pay.charge.config.paywayUsage",UPOINT_BALANCE:"pay.upiont.up.queryBalance",USER_DETAIL:"ucid.sns.detaiInfo",VALID_CODE:"ucid.user.verifyAlpha",USER_BASEINFO:"account.getUserBasicInfoByUid",USER_DETAIL:"account.getUserDetailInfoByUid",
UPDATE_NICKNAME:"account.updateUserNameByUid",UPDATE_USER_DETAIL:"account.updateUserDetailByUid",RECENT_GAMES:"ucid.sns.gameHistory",UPDATE_PASSWORD:"ucid.user.changePassword",PAY_HISTORY:"pay.order.query",VIP:"vip.query.vipInfo",SEND_MSG_TO_MOBILE:"test.sendMsg",BIND_MOBILE:"text.bindMobile",SECURITY_QUESTION:"ucid.account.getPasswordQuestion",VALIDATE_ANSWER:"ucid.account.verifyPasswordQuestion",RESET_PASSWORD:"ucid.account.resetPasswordByPasswordQuestion",QUERY_HISTORY:"ucid.user.ucidHistory",
BBS_GET_BOARD_BY_GAME:"h5bbs.getBoardStatsByGame",BBS_GET_BOARD_INDEX_INFO:"h5bbs.getBoardIndexObjects",BBS_GET_TOP_TOPICS:"h5bbs.getTopTopics",BBS_GET_TOPICS:"h5bbs.getTopics",BBS_GET_ELITE_TOPICS:"h5bbs.getEliteTopics",BBS_GET_NEW_TOPICS:"h5bbs.getNewTopics",BBS_GET_TOPICS_BY_GROUP:"h5bbs.getTopicsByGroup",BBS_SEARCH_BOARD_TOPICS:"h5bbs.searchBoardTopics",BBS_GET_TOPIC:"h5bbs.getTopic",BBS_DELETE_TOPIC:"bbs.deleteTopic",BBS_CREATE_TOPIC:"bbs.createTopic",BBS_UPDATE_TOPIC:"bbs.updateTopic",BBS_DELETE_FILE:"bbs.deleteFile",
BBS_UPDATE_FILE:"bbs.updateFile",BBS_GET_REPLIES:"h5bbs.getReplies",BBS_DELETE_REPLY:"bbs.deleteReply",BBS_CREATE_REPLY:"bbs.createReply",BBS_VOTE:"bbs.vote",BBS_DELETE_FILE:"bbs.deleteFile",BBS_UPDATE_FILE:"bbs.updateFile",UCID_ACCOUNT_QUERYSECURESTATE:"ucid.account.querySecureState",UCID_ACCOUNT_SENDMOBILESMSCODE:"ucid.account.sendMobileSmsCode",UCID_ACCOUNT_BINDMOBILEBYSMSCODE:"ucid.account.bindMobileBySmsCode",UCID_ACCOUNT_CHECKISBINDED:"ucid.account.queryUidByMobi",UCID_ACCOUNT_SETPASSWORDQUESTION:"ucid.account.setPasswordQuestion"},
models:{USER:"user",GAME:"game",PAY:"pay",BBS:"bbs",GENERAL:"general"},defaultActions:{sso:"login",user:"userInfo",pay:"render",bbs:"index"},businessCache:["payHistory"],ACCOUNT_TYPE:{UC:0,GAME:1},SMSContent:{CMCC:"cmcc",UNICOM:"unicom",cmcc:{dstAddr:"1065755551134",text:"04"},unicom:{dstAddr:"106900584",text:"04"}},straightApis:"h5bbs.getBoardStatsByGame,h5bbs.getBoardIndexObjects,h5bbs.getTopTopics,h5bbs.getTopics,h5bbs.getEliteTopics,h5bbs.getNewTopics,h5bbs.getTopicsByGroup,h5bbs.searchBoardTopics,h5bbs.getTopic,h5bbs.getReplies".split(",")};
